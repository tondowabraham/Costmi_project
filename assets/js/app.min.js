function delayAction(t,e){var a=0;return function(){var i=this,r=arguments;clearTimeout(a),a=setTimeout(function(){t.apply(i,r)},e||0)}}function selectLastlySelectedTab(t){t||(t=""),$(t+" [data-bs-toggle='ajax-tab']").each(function(){var t=$(this).attr("id"),e=getCookie("user_"+AppHelper.userId+"_"+t),a=$(this).find("[data-bs-target='"+e+"']");e&&a.attr("data-bs-target")?setTimeout(function(){a.trigger("click")},50):$(this).find("a").first().trigger("click")})}$(document).ready(function(){$.ajaxSetup({cache:!1}),moment.locale(AppLanugage.locale),(t=jQuery).fn.datepicker.dates.custom={days:AppLanugage.days,daysShort:AppLanugage.daysShort,daysMin:AppLanugage.daysMin,months:AppLanugage.months,monthsShort:AppLanugage.monthsShort,today:AppLanugage.today},$("body").on("click","[data-act=ajax-modal]",function(){var t={ajaxModal:1},e=$(this).attr("data-action-url"),a=$(this).attr("data-modal-lg"),i=$(this).attr("data-modal-fullscreen"),r=$(this).attr("data-modal-custom-bg"),n=$(this).attr("data-modal-close"),s=$(this).attr("data-title");return e?(s?$("#ajaxModalTitle").html(s):$("#ajaxModalTitle").html($("#ajaxModalTitle").attr("data-title")),$(this).attr("data-post-hide-header")?($("#ajaxModal .modal-header").addClass("hide"),$("#ajaxModal .modal-footer").addClass("hide")):($("#ajaxModal .modal-header").removeClass("hide"),$("#ajaxModal .modal-footer").removeClass("hide")),$("#ajaxModalContent").html($("#ajaxModalOriginalContent").html()),$("#ajaxModalContent").find(".original-modal-body").removeClass("original-modal-body").addClass("modal-body"),$("#ajaxModal").modal("show"),$("#ajaxModal").find(".modal-dialog").removeClass("custom-modal-lg"),$("#ajaxModal").find(".modal-dialog").removeClass("modal-fullscreen"),$("#ajaxModal").find(".modal-dialog").removeClass("custom-bg-modal"),$("#ajaxModal").removeClass("global-search-modal"),$(this).each(function(){$.each(this.attributes,function(){this.specified&&this.name.match("^data-post-")&&(t[this.name.replace("data-post-","")]=this.value)})}),ajaxModalXhr=$.ajax({url:e,data:t,cache:!1,type:"POST",success:function(t){$("#ajaxModal").find(".modal-dialog").removeClass("mini-modal"),"1"===a?$("#ajaxModal").find(".modal-dialog").addClass("custom-modal-lg"):"1"===i&&$("#ajaxModal").find(".modal-dialog").addClass("modal-fullscreen"),"1"===n&&$("#ajaxModal").addClass("global-search-modal"),"1"===r&&$("#ajaxModal").find(".modal-dialog").addClass("custom-bg-modal"),$("#ajaxModalContent").html(t),setSummernoteToAll(!0),setModalScrollbar(),feather.replace()},statusCode:{403:function(){console.log("403: Session expired."),location.reload()},404:function(){$("#ajaxModalContent").find(".modal-body").html(""),appAlert.error("404: Page not found.",{container:".modal-body",animate:!1})}},error:function(){$("#ajaxModalContent").find(".modal-body").html(""),appAlert.error("500: Internal Server Error.",{container:".modal-body",animate:!1})}}),!1):(console.log("Ajax Modal: Set data-action-url!"),!1)}),$("#ajaxModal").on("hidden.bs.modal",function(t){ajaxModalXhr.abort(),$("#ajaxModal").find(".modal-dialog").removeClass("modal-lg"),$("#ajaxModal").find(".modal-dialog").addClass("modal-lg"),$("#ajaxModalContent").html("")}),$("body").on("click show.bs.dropdown","[data-act=ajax-request]",function(){var t={},e=$(this),a=e.attr("data-action-url"),i=e.attr("data-remove-on-success"),r=e.attr("data-remove-on-click"),n=e.attr("data-fade-out-on-success"),s=e.attr("data-fade-out-on-click"),o=e.attr("data-inline-loader"),l=e.attr("data-reload-on-success"),d=e.attr("data-show-response"),c="";if(e.attr("data-real-target")?c=$(e.attr("data-real-target")):e.attr("data-closest-target")&&(c=e.closest(e.attr("data-closest-target"))),!a)return console.log("Ajax Request: Set data-action-url!"),!1;r&&$(r).length&&$(r).remove(),s&&$(s).length&&$(s).fadeOut(function(){$(this).remove()}),e.each(function(){$.each(this.attributes,function(){this.specified&&this.name.match("^data-post-")&&(t[this.name.replace("data-post-","")]=this.value)})}),"1"===o?e.addClass("spinning"):appLoader.show();var p={url:a,data:t,cache:!1,type:"POST",success:function(t){"1"===o&&e.removeClass("spinning"),d&&t?t.success?(t.message&&appAlert.success(t.message,{duration:1e4}),l&&location.reload()):appAlert.error(t.message):l&&location.reload(),i&&$(i).length&&$(i).remove(),n&&$(n).length&&$(n).fadeOut(function(){$(this).remove()}),appLoader.hide(),c.length&&(e.attr("data-append")?(e.remove(),c.append(t)):c.html(t))},statusCode:{404:function(){appLoader.hide(),appAlert.error("404: Page not found.")}},error:function(){appLoader.hide(),appAlert.error("500: Internal Server Error.")}};d&&(p.dataType="json"),ajaxRequestXhr=$.ajax(p)}),$("body").on("click",'[data-bs-toggle="ajax-tab"] a',function(){var t=$(this),e=t.attr("href"),a=t.attr("data-bs-target");return!!a&&(t.attr("data-reload")&&$(a).html(""),(""===$(a).html()||t.attr("data-reload"))&&(appLoader.show({container:a,css:"right:50%; bottom:auto;"}),$.ajax({url:e,cache:!1,type:"GET",success:function(t){$(a).html(t),feather.replace(),selectLastlySelectedTab(a)},statusCode:{403:function(){console.log("403: Session expired."),location.reload()},404:function(){appLoader.hide(),appAlert.error("404: Page not found.")}},error:function(){appLoader.hide(),appAlert.error("500: Internal Server Error.")}})),t.tab("show"),!1)}),selectLastlySelectedTab(),$("body").on("click",'[data-toggle="app-modal"]',function(){var t=!0;return"0"===$(this).attr("data-sidebar")&&(t=!1),appContentModal.init({url:$(this).attr("data-url"),sidebar:t}),!1});var t,e=function(t,e){var a=e.attr("data-success-callback");a&&void 0!==window[a]&&(window[a](t,e),t.message&&appAlert.warning(t.message,{duration:2e4}))},a=function(t){deleteConfirmationHandler(t,e)};$("body").on("click","a[data-action=delete-confirmation]:not(table a)",a);var i=function(t){var e=t.originalEvent.clipboardData.getData("text/plain");if(e.indexOf("/#comment")>-1){t.preventDefault();var a=e.split("/"),i=a.length,r=a[i-1];r||(i-=1,r=a[i-1]),r=r.split("-")[1];var n="#["+a[i-2]+"-"+r+"] ("+AppLanugage.comment+") ";document.execCommand("insertText",!1,n)}};$("body").on("paste","input, textarea",function(t){i(t)}),$("body").on("summernote.paste",function(t,e){i(e)})}),function(t){t.fn.appForm=function(e){var a=t.extend({},{ajaxSubmit:!0,isModal:!0,closeModalOnSuccess:!0,dataType:"json",showLoader:!0,onModalClose:function(){},onSuccess:function(){},onError:function(){return!0},onSubmit:function(){},onAjaxSuccess:function(){},beforeAjaxSubmit:function(t,e,a){}},e);function i(t){if(t){var e=AppHelper.settings.dateFormat||"Y.m.d",e=e.toLowerCase(),a=e.charAt("1"),i=e.split(a),r=0,n=1,s=2;"y"===i[1]?r=1:"y"===i[2]&&(r=2),"m"===i[0]?n=0:"m"===i[2]&&(n=2),"d"===i[0]?s=0:"d"===i[1]&&(s=1);var o=t.split(a);return o[r]+"-"+o[n]+"-"+o[s]}}function r(e,a){t.validator.addMethod("greaterThanOrEqual",function(e,a,r){var n=r;return r&&(0===r.indexOf("#")||0===r.indexOf("."))&&(n=t(r).val()),void 0===t(a).attr("data-rule-required")&&!e||(/Invalid|NaN/.test(new Date(i(e)))?isNaN(e)&&isNaN(n)||Number(e)>=Number(n):!n||new Date(i(e))>=new Date(i(n)))},"Must be greater than {0}."),t.validator.addMethod("greaterThan",function(e,a,i){var r=i;return(i&&(0===i.indexOf("#")||0===i.indexOf("."))&&(r=t(i).val()),/Invalid|NaN/.test(new Number(e)))?isNaN(e)&&isNaN(r)||Number(e)>Number(r):new Number(e)>new Number(r)},"Must be greater than."),t.validator.addMethod("mustBeSameYear",function(e,a,r){var n=r;if(r&&(0===r.indexOf("#")||0===r.indexOf("."))&&(n=t(r).val()),!/Invalid|NaN/.test(new Date(i(e)))){var s=new Date(i(e)),o=new Date(i(n));return s&&o&&s.getFullYear()===o.getFullYear()}},"The year must be same for both dates."),t(e).validate({submitHandler:function(t){if(!a)return!0;a(t)},highlight:function(e){t(e).closest(".form-group").addClass("has-error")},unhighlight:function(e){t(e).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block",ignore:":hidden:not(.validate-hidden)",errorPlacement:function(t,e){e.parent(".input-group").length?t.insertAfter(e.parent()):t.insertAfter(e)}}),t(".validate-hidden").click(function(){t(this).closest(".form-group").removeClass("has-error").find(".help-block").hide()})}function n(e){e&&(t(".modal-mask").html("<div class='circle-done'><i data-feather='check' stroke-width='5'></i></div>"),setTimeout(function(){t(".modal-mask").find(".circle-done").addClass("ok")},30)),setTimeout(function(){t(".modal-mask").remove(),t("#ajaxModal").modal("toggle"),a.onModalClose()},1e3)}return this.each(function(){a.ajaxSubmit?r(t(this),function(e){var r,s,o;a.onSubmit(),a.isModal?(r=t("#ajaxModalContent").find(".modal-body"),s=r.height()-80,s>0&&(s=Math.floor(s/2)),r.after("<div class='modal-mask'><div class='circle-loader'></div></div>"),o=r.outerHeight(),t(".modal-mask").css({width:r.width()+22+"px",height:o+"px","padding-top":s+"px"}),r.closest(".modal-dialog").find('[type="submit"]').attr("disabled","disabled"),r.addClass("hide")):t(e).find('[type="submit"]').attr("disabled","disabled"),"1"===AppHelper.settings.enableRichTextEditor&&t("textarea").each(function(){var e=t(this);e.attr("data-rich-text-editor")&&("<p><br></p>"===e.val()||""===e.val()?e.val(""):e.val(e.summernote("code")))}),t(e).ajaxSubmit({dataType:a.dataType,beforeSubmit:function(r,n,s){t.each(r,function(t,e){e.data&&e.data.convertDateFormat&&e.value&&(r[t].value=i(e.value))}),!a.isModal&&a.showLoader&&appLoader.show({container:e,css:"top:2%; right:46%;"}),a.beforeAjaxSubmit(r,n,s)},success:function(i){var r;a.onAjaxSuccess(i),i.success?(a.onSuccess(i),a.isModal&&a.closeModalOnSuccess&&n(!0),a.isModal||t(e).find("textarea").each(function(){void 0!=t(this).attr("data-rich-text-editor")&&void 0==t(this).attr("data-keep-rich-text-editor-after-submit")&&t(this).summernote("destroy")}),appLoader.hide()):a.onError(i)&&(a.isModal?((r=t(".modal-body").removeClass("hide")).closest(".modal-dialog").find('[type="submit"]').removeAttr("disabled"),r.removeClass("hide"),t(".modal-mask").remove(),i.message&&appAlert.error(i.message,{container:".modal-body",animate:!1})):i.message&&appAlert.error(i.message)),t(e).find('[type="submit"]').removeAttr("disabled")}})}):r(t(this))}),this.closeModal=function(){n(!0)},this}}(jQuery);var define,define,define,getWeekRange=function(t){t||(t=moment().format("YYYY-MM-DD"));var e=moment(t).format("E")-AppHelper.settings.firstDayOfWeek,a={};return e<7?a.firstDateOfWeek=moment(t).subtract(e,"days").format("YYYY-MM-DD"):a.firstDateOfWeek=moment(t).format("YYYY-MM-DD"),e<0&&(a.firstDateOfWeek=moment(a.firstDateOfWeek).subtract(7,"days").format("YYYY-MM-DD")),a.lastDateOfWeek=moment(a.firstDateOfWeek).add(6,"days").format("YYYY-MM-DD"),a};function getFilterInfo(t){var e=null;return $.each(AppHelper.settings.filters||[],function(a,i){t===i.id&&(e=i)}),e}function getContextFilterInfo(t,e){var a=getFilterInfo(t),i=e.smartFilterIdentity,r=e.contextMeta?e.contextMeta.contextId:"";return a&&i&&a.context!==i&&a.context!==i+"_"+r&&(a=null),a}function getContextFilters(t){var e=[],a=t.smartFilterIdentity,i=t.contextMeta?t.contextMeta.contextId:"",r="";return i&&(r=a+"_"+i),a&&$.each(AppHelper.settings.filters||[],function(t,i){(i.context===a||i.context===r)&&e.push(i)}),e.sort(function(t,e){var a=t.title.toLowerCase(),i=e.title.toLowerCase();return a<i?-1:a>i?1:0}),e}class DefaultFilters{constructor(t){return this.settings=t,this.init(),this.settings}init(){var t=getFilterIdFromCookie(this.settings);t&&this.settings.stateSave&&!this.settings.ignoreSavedFilter&&getContextFilterInfo(t,this.settings)?this.initSelectedFilter(t):(this.prepareDefaultDateRangeFilterParams(),this.prepareDefaultCheckBoxFilterParams(),this.prepareDefaultMultiSelectilterParams(),this.prepareDefaultRadioFilterParams(),this.prepareDefaultDropdownFilterParams(),this.prepareDefaultrSingleDatepickerFilterParams(),this.prepareDefaultrRngeDatepickerFilterParams())}initSelectedFilter(t){if(t){var e={},a=getContextFilterInfo(t,this.settings);a&&(e=cloneDeep(a.params)),this.settings.filterParams=cloneDeep(e)}}prepareDefaultDateRangeFilterParams(){var t=this.settings;if("daily"===t.dateRangeType)t.filterParams.start_date=moment().format(t._inputDateFormat),t.filterParams.end_date=t.filterParams.start_date;else if("monthly"===t.dateRangeType){var e=moment().daysInMonth(),a=moment().format("YYYY-MM");t.filterParams.start_date=a+"-01",t.filterParams.end_date=a+"-"+e}else if("yearly"===t.dateRangeType){var i=moment().format("YYYY");t.filterParams.start_date=i+"-01-01",t.filterParams.end_date=i+"-12-31"}else if("weekly"===t.dateRangeType){var r=getWeekRange();t.filterParams.start_date=r.firstDateOfWeek,t.filterParams.end_date=r.lastDateOfWeek}this.settings=t}prepareDefaultCheckBoxFilterParams(t){var t=this.settings,e=[],a="";$.each(t.checkBoxes,function(t,i){a=i.name,i.isChecked&&e.push(i.value)}),t.filterParams[a]=e,this.settings=t}prepareDefaultMultiSelectilterParams(t){var t=this.settings;$.each(t.multiSelect,function(e,a){var i=a.saveSelection,r=getCookie(a.name),n=[];i&&r?n=r=r.split("-"):$.each(a.options,function(t,e){e.isChecked&&n.push(e.value)}),t.filterParams[a.name]=n}),this.settings=t}prepareDefaultRadioFilterParams(t){var t=this.settings;$.each(t.radioButtons,function(e,a){a.isChecked&&(t.filterParams[a.name]=a.value)}),this.settings=t}prepareDefaultDropdownFilterParams(t){var t=this.settings;$.each(t.filterDropdown||[],function(e,a){$.each(a.options,function(e,i){i.isSelected&&(t.filterParams[a.name]=i.id)})}),this.settings=t}prepareDefaultrSingleDatepickerFilterParams(t){var t=this.settings;$.each(t.singleDatepicker||[],function(e,a){$.each(a.options||[],function(e,i){i.isSelected&&(t.filterParams[a.name]=i.value)})}),this.settings=t}prepareDefaultrRngeDatepickerFilterParams(t){var t=this.settings;$.each(t.rangeDatepicker||[],function(e,a){a.startDate&&a.startDate.value&&(t.filterParams[a.startDate.name]=a.startDate.value),a.startDate&&a.endDate.value&&(t.filterParams[a.endDate.name]=a.endDate.value)}),this.settings=t}}var prepareDefaultFilters=function(t){return new DefaultFilters(t)};function cloneDeep(t){if("object"!=typeof t||null===t)return t;let e;if(Array.isArray(t)){e=[];for(let a=0;a<t.length;a++)e[a]=cloneDeep(t[a])}else for(let i in e={},t)t.hasOwnProperty(i)&&(e[i]=cloneDeep(t[i]));return e}function getFilterIdFromCookie(t){var e=AppHelper.userId?AppHelper.userId:"public";return getCookie("filter_"+t.smartFilterIdentity+"_"+e)}class BuildFilters{constructor(t,e,a){this.leftFilterSectionClsss=".filter-section-left",this.rightFilterSectionClsss=".filter-section-right",this.filterFormClass=".filter-form",this.settings=t,this.$instanceWrapper=e,this.$instance=a,this.randomId=getRandomAlphabet(5),this.filterElements=[],this.activeFilterId="",this.state="new_filter"}init(){this.prepareSurchOption(),this.prepareCollapsePannelButton(),this.prepareReloadButton(),this.prepareSmartFilterDropdown(),this.prepareFilterFormShowButton(),this.prepareBookmarkFilterButtons(),this.hideFilterForm(),this.prepareDropdownFilters(),this.prepareDateRangePicker(),this.prepareDatePickerFilter(),this.prepareSingleDatePicker(),this.prepareRadioFilter(),this.prepareMultiselectFilter(),this.prepareCheckboxFilter(),this.prepareSaveFilterButton(),this.prepareCancelFilterFormButton(),this.initActiveFilterFromCookie(),window.Filters||(window.Filters=[]),window.Filters[this.settings.smartFilterIdentity]=this}saveSelectedFilter(){var t=AppHelper.userId?AppHelper.userId:"public";setCookie("filter_"+this.settings.smartFilterIdentity+"_"+t,this.activeFilterId)}initActiveFilterFromCookie(){if(this.settings.stateSave&&!this.settings.ignoreSavedFilter){var t=getFilterIdFromCookie(this.settings);t&&getContextFilterInfo(t,this.settings)&&(this.activeFilterId=t,this.applySelectedFilter(t,!1))}}reloadInstance(){this.$instance.is("table")?this.$instance.appTable({reload:!0,filterParams:this.settings.filterParams}):this.$instance.appFilters({reload:!0,filterParams:this.settings.filterParams})}prepareSmartFilterDropdown(){if(this.settings.smartFilterIdentity){var t=this,e=" data-post-context='"+t.settings.smartFilterIdentity+"'  data-post-instance_id='"+t.getInstanceId()+"' ";t.getContextId()&&(e+=" data-post-context_id= '"+t.getContextId()+"' ");var a=AppHelper.baseUrl+"index.php/filters/manage_modal/"+t.settings.smartFilterIdentity,i='<div class=\'dropdown-menu w300\'><div class="pb10 pl10"><a class="inline-block btn btn-default manage-filters-button" data-act="ajax-modal" data-title="'+AppLanugage.manageFilters+'" '+e+'  type="button" data-action-url="'+a+'" ><i data-feather="tool" class="icon-16 mr5"></i>'+AppLanugage.manageFilters+' </a><a class="inline-block btn btn-default clear-filter-button ml10 hide" href="#"><i data-feather="delete" class="icon-16 mr5"></i>'+AppLanugage.clear+'</a></div><input type="text" class="form-control search-filter" placeholder="'+AppLanugage.search+'"><div class="dropdown-divider"></div><ul class=\'list-group smart-filter-list-group\'></ul></div>';this.$instanceWrapper.find(t.leftFilterSectionClsss).append('<div class="filter-item-box"><div class="dropdown smart-filter-dropdown-container"><button class="btn btn-default smart-filter-dropdown dropdown-toggle caret" type="button" data-bs-toggle="dropdown" aria-expanded="true"></button>'+i+"</div></div>"),this.refreshFilterDropdown(),this.$instanceWrapper.find(".smart-filter-dropdown-container").on("click",".smart-filter-item",function(){var e=($(this).data()||{}).id;t.state="new_filter",t.applySelectedFilter(e)});var r=this.$instanceWrapper.find(".search-filter"),n=this.$instanceWrapper.find(".smart-filter-dropdown-container"),s=function(){var e=t.$instanceWrapper.find(".smart-filter-list-group"),a=t.$instanceWrapper.find(".smart-filter-item.active");if(t.$instanceWrapper.find(".smart-filter-item:visible").length>6){e.css({"overflow-y":"scroll",height:"270px"});var i=a.offset()?a.offset().top:0,r=e.offset()?e.offset().top:0;i-r>e.height()&&e.scrollTop(i-r)}else e.css({"overflow-y":"scroll",height:"auto"})};n.on("show.bs.dropdown",function(){setTimeout(function(){s(),r.val("").focus(),t.$instanceWrapper.find(".smart-filter-item.active").length||t.$instanceWrapper.find(".smart-filter-item").first().addClass("active")})}),r.on("input",function(e){var a=t.$instanceWrapper.find(".smart-filter-item"),i=$(this).val().toLowerCase(),r=!1;a.each(function(){var t=$(this).html().toLowerCase(),e=!0;t.includes(i)?($(this).parent().removeClass("hide"),r||($(this).addClass("active"),r=!0,e=!1)):$(this).parent().addClass("hide"),e&&$(this).removeClass("active")}),s()}),r.on("keydown",function(e){var a=t.$instanceWrapper.find(".smart-filter-item.active");40===e.keyCode?(e.preventDefault(),a.parent().nextAll(":visible").length&&(a.removeClass("active"),a=a.parent().nextAll(":visible").first().find("a").addClass("active"))):38===e.keyCode?(e.preventDefault(),a.parent().prevAll(":visible").length&&(a.removeClass("active"),a=a.parent().prevAll(":visible").first().find("a").addClass("active"))):13===e.keyCode&&(e.preventDefault(),t.$instanceWrapper.find(".smart-filter-item.active").trigger("click"),n.dropdown("toggle"));var i=t.$instanceWrapper.find(".smart-filter-list-group");a.length&&a.offset().top+a.outerHeight()-i.offset().top>i.height()?i.scrollTop(i.scrollTop()+a.outerHeight()):a.length&&a.offset().top-i.offset().top<0&&i.scrollTop(i.scrollTop()-a.outerHeight())}),this.$instanceWrapper.find(".clear-filter-button").click(function(){t.activeFilterId="",t.clearAllFilters(),t.refreshFilterDropdown(),t.reloadInstance(),t.saveSelectedFilter()})}}initChangeFilter(t){this.activeFilterId=t,this.showFilterForm(),this.state="change_filter",this.applySelectedFilter(t)}applySelectedFilter(t,e=!0){var a=this;if(t){a.activeFilterId=t;var i=[],r=getContextFilterInfo(t,this.settings);a.settings.filterParams=cloneDeep(r.params),i=cloneDeep(r.params);var n=[];for(var s in $.each(i,function(t,e){n.push(t);var r=a.filterElements[t];r&&r.setValue(e,cloneDeep(i))}),a.filterElements)if(!n.includes(s)){var o=a.filterElements[s];o&&o.setValue("")}a.refreshFilterDropdown(),!1!==e&&a.reloadInstance(),a.showHideClearFilterButton(),a.updateFilterModalState(r),a.saveSelectedFilter()}}refreshFilterDropdown(){var t="",e=this,a=e.getFilters(),i="";$.each(a,function(a,r){var n="";r.id===e.activeFilterId&&(n="active",i=r.title),t+='<li><a href="#" class="dropdown-item smart-filter-item list-group-item clickable '+n+' "data-id="'+r.id+'">',t+=r.title,t+="</a></li>"}),this.$instanceWrapper.find(".smart-filter-list-group").html(t),i||(i=AppLanugage.filters);var r='<i data-feather="filter" class="icon-16 mr5"></i>'+i;this.$instanceWrapper.find(".smart-filter-dropdown").html(r),a.length?(this.$instanceWrapper.find(".smart-filter-dropdown-container").removeClass("hide"),this.$instanceWrapper.find(".show-filter-form-button").find(".add-filter-text").addClass("hide")):(this.$instanceWrapper.find(".smart-filter-dropdown-container").addClass("hide"),this.$instanceWrapper.find(".show-filter-form-button").find(".add-filter-text").removeClass("hide")),feather.replace()}getFilters(){return getContextFilters(this.settings)}prepareSurchOption(){var t=this.settings,e=this;if(t.search&&!1!==t.search.show){var a,i='<div class="filter-item-box"><input type="search" class="custom-filter-search" name="'+t.search.name+'" placeholder="'+t.customLanguage.searchPlaceholder+'"></div>';e.$instanceWrapper.find(e.rightFilterSectionClsss).append(i),e.$instanceWrapper.find(".custom-filter-search").keyup(function(){appLoader.show();var i=$(this);clearTimeout(a),a=setTimeout(function(){e.settings.filterParams[t.search.name]=i.val(),e.reloadInstance()},700)})}}prepareCollapsePannelButton(){if(this.settings.isMobile&&(this.settings.dateRangeType||void 0!==this.settings.checkBoxes[0]||void 0!==this.settings.multiSelect[0]||void 0!==this.settings.radioButtons[0]||void 0!==this.settings.singleDatepicker[0]||void 0!==this.settings.rangeDatepicker[0]||void 0!==this.settings.filterDropdown[0])){var t="<div class='float-end filter-collapse-button'>                        <button title='"+AppLanugage.filters+"' class='dropdown-toggle btn btn-default mt0' data-bs-toggle='collapse' data-bs-target='#table-collapse-filter-"+this.randomId+"' aria-expanded='false'><i data-feather='sliders' class='icon-18'></i></button>                    </div>                    <div id='table-collapse-filter-"+this.randomId+"' class='navbar-collapse collapse w100p'></div>";this.$instanceWrapper.find(this.leftFilterSectionClsss).append(t)}}prepareReloadButton(){var t=this;if(t.settings.reloadSelector){if(!$(t.settings.reloadSelector).length){var e='<div class="filter-item-box"><button class="btn btn-default" id="'+t.settings.reloadSelector.slice(1)+'"><i data-feather="refresh-cw" class="icon-16"></i></button></div>';this.$instanceWrapper.find(this.leftFilterSectionClsss).append(e)}$(t.settings.reloadSelector).length&&$(t.settings.reloadSelector).click(function(){appLoader.show(),t.reloadInstance()})}}showHideClearFilterButton(){this.activeFilterId?this.$instanceWrapper.find(".clear-filter-button").removeClass("hide"):this.$instanceWrapper.find(".clear-filter-button").addClass("hide")}clearAllFilters(){var t=this;for(var e in t.activeFilterId="",this.filterElements){var a=t.filterElements[e];t.settings.filterParams[e]="",a&&a.setValue("")}t.showHideClearFilterButton()}prepareFilterFormShowButton(){if(this.settings.smartFilterIdentity){var t=this.getFilters(),e='<span class="add-filter-text ml5">'+AppLanugage.addNewFilter+"</span>";t.length?e="":this.$instanceWrapper.find(".smart-filter-dropdown-container").addClass("hide");var a='<div class="filter-item-box"><button class="btn btn-default show-filter-form-button" type="button"><i data-feather="plus" class="icon-16"></i>'+e+"</button></div>",i=this;this.$instanceWrapper.find(this.leftFilterSectionClsss).append(a),this.$instanceWrapper.find(".show-filter-form-button").click(function(){i.showFilterForm()})}}prepareBookmarkFilterButtons(){if(this.settings.smartFilterIdentity){var t=this;t.refreshBookmarkFilterButtons(),t.$instanceWrapper.find(".filter-section-container").on("click",".bookmarked-filter-button",function(){var e=($(this).data()||{}).id;t.state="new_filter",t.applySelectedFilter(e)})}}refreshBookmarkFilterButtons(){if(this.settings.smartFilterIdentity){var t=this,e=t.getFilters();t.$instanceWrapper.find(".bookmarked-filter-button-wrapper").remove(),$.each(e,function(e,a){if("1"==a.bookmark){var i=a.title;a.icon&&(i='<i data-feather="'+a.icon+'" class="icon-16"></i>');var r='<div class="filter-item-box bookmarked-filter-button-wrapper"><button class="btn btn-default bookmarked-filter-button round" type="button" data-id="'+a.id+'"  >'+i+"</button></div>";t.$instanceWrapper.find(t.leftFilterSectionClsss).append(r)}}),feather.replace()}}hideFilterForm(){this.state="new_filter",this.$instanceWrapper.find(this.filterFormClass).addClass("hide"),this.showFilterFormButton()}showFilterForm(){this.$instanceWrapper.find(this.filterFormClass).removeClass("hide"),this.hideFilterFormButton(),this.showSaveFilterButton(),this.updateFilterModalState()}hideFilterFormButton(){this.$instanceWrapper.find(".show-filter-form-button").closest(".filter-item-box").addClass("hide")}showFilterFormButton(){this.$instanceWrapper.find(".show-filter-form-button").closest(".filter-item-box").removeClass("hide")}updateFilterModalState(t){var e=AppLanugage.newFilter,a=this.$instanceWrapper.find(".save-filter-button");"change_filter"===this.state?(e=AppLanugage.updateFilter,t&&(e+=" ("+t.title+")"),a.attr("data-title",e),a.attr("data-post-id",this.activeFilterId),a.attr("data-post-change_filter","1")):(a.attr("data-title",e),a.attr("data-post-id",getRandomAlphabet(10)),a.attr("data-post-change_filter",""))}showSaveFilterButton(){this.getFilters().length?this.$instanceWrapper.find(".save-filter-button").addClass("btn-default").removeClass("btn-success"):this.$instanceWrapper.find(".save-filter-button").addClass("btn-success").removeClass("btn-default"),this.$instanceWrapper.find(".save-filter-button").closest(".filter-item-box").removeClass("hide")}hideSaveSelectedFilterButton(){this.$instanceWrapper.find(".save-filter-button").closest(".filter-item-box").addClass("hide")}getInstanceId(){return this.$instance.attr("id")}getContextId(){return this.settings.contextMeta&&this.settings.contextMeta.contextId?this.settings.contextMeta.contextId:""}getContextDependencies(){return this.settings.contextMeta&&this.settings.contextMeta.dependencies?this.settings.contextMeta.dependencies:""}prepareSaveFilterButton(){if(this.settings.smartFilterIdentity){var t=" data-post-context='"+this.settings.smartFilterIdentity+"'  data-post-instance_id='"+this.getInstanceId()+"' ";this.getContextId()&&(t+=" data-post-context_id= '"+this.getContextId()+"' ");var e='<div class="filter-item-box save-filter-box hide"><button class="btn btn-default save-filter-button" data-act="ajax-modal" data-title="" '+t+'  type="button" data-action-url="'+AppHelper.baseUrl+'index.php/filters/modal_form" ><i data-feather="check-circle" class="icon-16"></i></button></div>';this.$instanceWrapper.find(this.filterFormClass).append(e)}}prepareCancelFilterFormButton(){if(this.settings.smartFilterIdentity){var t=this;this.$instanceWrapper.find(this.filterFormClass).append('<div class="filter-item-box filter-cancel-box"><button class="btn btn-default cancel-filter-button" type="button" ><i data-feather="x-circle" class="icon-16"></i></button></div>'),this.$instanceWrapper.find(".cancel-filter-button").click(function(){t.hideFilterForm()})}}appendFilterDom(t){this.settings.smartFilterIdentity?this.$instanceWrapper.find(this.filterFormClass).append(t):this.settings.isMobile?this.$instanceWrapper.find("#table-collapse-filter-"+this.randomId).append(t):this.$instanceWrapper.find(this.leftFilterSectionClsss).append(t)}prepareDateRangePicker(){var t=this,e=this.settings,a=(this.$instance,this.$instanceWrapper);if(e.dateRangeType){this.appendFilterDom('<div class="filter-item-box btn-group"><button data-act="prev" class="btn btn-default date-range-selector"><i data-feather="chevron-left" class="icon"></i></button><button data-act="datepicker" class="btn btn-default"></button><button data-act="next"  class="btn btn-default date-range-selector"><i data-feather="chevron-right" class="icon"></i></button></div>');var i=a.find("[data-act='datepicker']"),r=a.find(".date-range-selector");if("daily"===e.dateRangeType){var n=function(t){e.filterParams.start_date===moment().format(e._inputDateFormat)?t.html(e.customLanguage.today):e.filterParams.start_date===moment().subtract(1,"days").format(e._inputDateFormat)?t.html(e.customLanguage.yesterday):e.filterParams.start_date===moment().add(1,"days").format(e._inputDateFormat)?t.html(e.customLanguage.tomorrow):t.html(moment(e.filterParams.start_date).format("Do MMMM YYYY"))};n(i),i.datepicker({format:e._inputDateFormat,autoclose:!0,todayHighlight:!0,language:"custom",orientation:"bottom"}).on("changeDate",function(a){var r=moment(a.date).format(e._inputDateFormat);e.filterParams.start_date=r,e.filterParams.end_date=r,n(i),t.reloadInstance()}),r.click(function(){var a=$(this).attr("data-act"),r="";"next"===a?r=moment(e.filterParams.start_date).add(1,"days").format(e._inputDateFormat):"prev"===a&&(r=moment(e.filterParams.start_date).subtract(1,"days").format(e._inputDateFormat)),e.filterParams.start_date=r,e.filterParams.end_date=r,n(i),t.reloadInstance()}),t.filterElements.start_date={setValue:function(t){i.datepicker("update",t),n(i)}}}if("monthly"===e.dateRangeType){var s=function(t){t.html(moment(e.filterParams.start_date).format("MMMM YYYY"))};s(i),i.datepicker({format:"YYYY-MM",viewMode:"months",minViewMode:"months",autoclose:!0,language:"custom",orientation:"bottom"}).on("changeDate",function(a){var r=moment(a.date).format(e._inputDateFormat),n=moment(r).daysInMonth(),o=moment(r).format("YYYY-MM");e.filterParams.start_date=o+"-01",e.filterParams.end_date=o+"-"+n,s(i),t.reloadInstance()}),r.click(function(){var a=$(this).attr("data-act"),r=moment(e.filterParams.start_date),n=moment(e.filterParams.end_date);if("next"===a){var o=r.add(1,"months"),l=o.daysInMonth(),d=o.format("YYYY-MM");r=d+"-01",n=d+"-"+l}else if("prev"===a){var c=r.subtract(1,"months"),l=c.daysInMonth(),d=c.format("YYYY-MM");r=d+"-01",n=d+"-"+l}e.filterParams.start_date=r,e.filterParams.end_date=n,s(i),t.reloadInstance()}),t.filterElements.start_date={setValue:function(t){i.datepicker("update",t),s(i)}}}if("yearly"===e.dateRangeType){var o=function(t){t.html(moment(e.filterParams.start_date).format("YYYY"))};o(i),i.datepicker({format:"YYYY-MM",viewMode:"years",minViewMode:"years",autoclose:!0,language:"custom",orientation:"bottom"}).on("changeDate",function(a){var r=moment(a.date).format(e._inputDateFormat),n=moment(r).format("YYYY");e.filterParams.start_date=n+"-01-01",e.filterParams.end_date=n+"-12-31",o(i),t.reloadInstance()}),r.click(function(){var a=$(this).attr("data-act"),r=moment(e.filterParams.start_date),n=moment(e.filterParams.end_date);"next"===a?(r=r.add(1,"years").format(e._inputDateFormat),n=n.add(1,"years").format(e._inputDateFormat)):"prev"===a&&(r=r.subtract(1,"years").format(e._inputDateFormat),n=n.subtract(1,"years").format(e._inputDateFormat)),e.filterParams.start_date=r,e.filterParams.end_date=n,o(i),t.reloadInstance()}),t.filterElements.start_date={setValue:function(t){i.datepicker("update",t),o(i)}}}if("weekly"===e.dateRangeType){var l=function(t){var a=moment(e.filterParams.start_date).format("Do MMM"),r=moment(e.filterParams.end_date).format("Do MMM, YYYY");i.datepicker({format:"YYYY-MM-DD",autoclose:!0,calendarWeeks:!0,language:"custom",orientation:"bottom",weekStart:AppHelper.settings.firstDayOfWeek}),t.html(a+" - "+r)};l(i),r.click(function(){var a=$(this).attr("data-act"),r=moment(e.filterParams.start_date),n=moment(e.filterParams.end_date);"next"===a?(r=r.add(7,"days").format(e._inputDateFormat),n=n.add(7,"days").format(e._inputDateFormat)):"prev"===a&&(r=r.subtract(7,"days").format(e._inputDateFormat),n=n.subtract(7,"days").format(e._inputDateFormat)),e.filterParams.start_date=r,e.filterParams.end_date=n,l(i),t.reloadInstance()}),i.datepicker({format:e._inputDateFormat,autoclose:!0,calendarWeeks:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek}).on("show",function(){$(".datepicker").addClass("week-view"),$(".datepicker-days").find(".active").siblings(".day").addClass("active")}).on("changeDate",function(a){var r=getWeekRange(a.date);e.filterParams.start_date=r.firstDateOfWeek,e.filterParams.end_date=r.lastDateOfWeek,l(i),t.reloadInstance()}),t.filterElements.start_date={setValue:function(t){i.datepicker("update",t),l(i)}}}}}prepareDropdownFilters(){var t=this.settings,e=this,a=(this.$instance,this.$instanceWrapper);void 0!==t.filterDropdown[0]&&$.each(t.filterDropdown,function(i,r){var n="",s="",o=[];$.each(r.options,function(t,e){var a="";e.isSelected&&(a="selected",s=e.id),r.showHtml?o.push({id:e.id,text:e.text}):n+="<option "+a+' value="'+e.id+'">'+e.text+"</option>"}),r.name&&(t.filterParams[r.name]=s);var l='<select class="'+r.class+'" name="'+r.name+'">'+n+"</select>";r.showHtml&&(l='<input class="'+r.class+'" name="'+r.name+'" />');var d='<div class="filter-item-box">'+l+"</div>";e.appendFilterDom(d);var c=a.find("[name='"+r.name+"']");void 0!==window.Select2&&(r.showHtml?c.select2({data:o,escapeMarkup:function(t){return t}}):c.select2()),c.change(function(){var a=$(this),i=a.attr("name"),n=a.val();t.filterParams[i]=n,r.dependent&&r.dependent.length&&e.prepareDependentFilter(i,n,t.filterDropdown,t.filterParams),r.onChangeCallback&&r.onChangeCallback(n,t.filterParams),e.reloadInstance()}),e.filterElements[r.name]={setValue:function(a,i){c.select2("val",a),r.showHtml&&!a&&o[0]&&!o[0].id&&o[0].text&&c.siblings(".select2-container").find(".select2-chosen").html(o[0].text),window[r.name]=c,r.dependent&&r.dependent.length&&e.prepareDependentFilter(r.name,a,t.filterDropdown,t.filterParams,i),r.onChangeCallback&&r.onChangeCallback(a,i)}}})}prepareDatePickerFilter(){var t=this.settings,e=this,a=(this.$instance,this.$instanceWrapper);void 0!==t.rangeDatepicker[0]&&$.each(t.rangeDatepicker,function(i,r){var n=r.startDate||{},s=r.endDate||{},o=!!r.showClearButton,l='<i data-feather="calendar" class="icon-16"></i>',d=n.value?moment(n.value,t._inputDateFormat).format("Do MMMM YYYY"):l,c=s.value?moment(s.value,t._inputDateFormat).format("Do MMMM YYYY"):l;t.filterParams[n.name]=n.value,t.filterParams[s.name]=s.value;var p=function(a,i){t.filterParams[a]=i,e.reloadInstance()},f={today:[moment().format("YYYY-MM-DD"),moment().format("YYYY-MM-DD")],yesterday:[moment().subtract(1,"days").format("YYYY-MM-DD"),moment().subtract(1,"days").format("YYYY-MM-DD")],tomorrow:[moment().add(1,"days").format("YYYY-MM-DD"),moment().add(1,"days").format("YYYY-MM-DD")],last_7_days:[moment().subtract(6,"days").format("YYYY-MM-DD"),moment().format("YYYY-MM-DD")],next_7_days:[moment().format("YYYY-MM-DD"),moment().add(6,"days").format("YYYY-MM-DD")],last_30_days:[moment().subtract(29,"days").format("YYYY-MM-DD"),moment().format("YYYY-MM-DD")],this_month:[moment().startOf("month").format("YYYY-MM-DD"),moment().endOf("month").format("YYYY-MM-DD")],last_month:[moment().subtract(1,"month").startOf("month").format("YYYY-MM-DD"),moment().subtract(1,"month").endOf("month").format("YYYY-MM-DD")],next_month:[moment().add(1,"month").startOf("month").format("YYYY-MM-DD"),moment().add(1,"month").endOf("month").format("YYYY-MM-DD")],this_year:[moment().startOf("year").format("YYYY-MM-DD"),moment().endOf("year").format("YYYY-MM-DD")],next_year:[moment().add(1,"year").startOf("year").format("YYYY-MM-DD"),moment().add(1,"year").endOf("year").format("YYYY-MM-DD")],last_year:[moment().subtract(1,"year").startOf("year").format("YYYY-MM-DD"),moment().subtract(1,"year").endOf("year").format("YYYY-MM-DD")]},u='<span class="input-group-addon">-</span>',m=!1;if(r.label&&(u='<span class="input-group-addon custom-date-range-lable">'+r.label+"</span>",r.ranges)){var h="";$.each(r.ranges,function(t,e){f[e]&&(h+='<li><a href="#" class="dropdown-item list-group-item clickable" data-range="'+e+'">',h+=AppLanugage[e],h+="</a></li>")}),h&&(m=!0,u='<span class="input-group-addon custom-date-range-dropdown clickable">'+('<div class="dropdown"><div class="dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="true">'+r.label+'</div><div class="dropdown-menu"><ul class="list-group">'+h)+"</ul></div></div></span>")}var v="daterange-"+getRandomAlphabet(5),g='<div class="filter-item-box"><div class="input-daterange input-group '+v+'"><button class="btn btn-default form-control" name="'+n.name+'" data-date="'+n.value+'">'+d+"</button>"+u+'<button class="btn btn-default form-control" name="'+s.name+'" data-date="'+s.value+'">'+c+"</div></div>";e.appendFilterDom(g);var b=a.find("."+v),y=b.find("button").toArray(),x=function(){var e=t.filterParams[n.name],a=t.filterParams[s.name];$(y[0]).html(e?moment(e,t._inputDateFormat).format("Do MMMM YYYY"):l),$(y[1]).html(a?moment(a,t._inputDateFormat).format("Do MMMM YYYY"):l)};b.datepicker({format:"yyyy-mm-dd",autoclose:!0,todayHighlight:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek,orientation:"bottom",inputs:y}).on("changeDate",function(e){var a=moment(e.date,t._inputDateFormat).format(t._inputDateFormat);t.filterParams[n.name]||(t.filterParams[n.name]=a),t.filterParams[s.name]||(t.filterParams[s.name]=a),p($(e.target).attr("name"),a),x()}).on("show",function(){o&&($(".datepicker-clear-selection").show(),$(".datepicker-clear-selection").length||($(".datepicker").append("<div class='datepicker-clear-selection p5 clickable text-center'>"+AppLanugage.clear+"</div>"),$(".datepicker .datepicker-clear-selection").click(function(){t.filterParams[n.name]="",p(s.name,""),$(y[0]).html(l),$(y[1]).html(l),$(".datepicker").hide()})))}),m&&e.$instanceWrapper.find("."+v).on("click",".list-group-item",function(){var e=f[($(this).data()||{}).range];t.filterParams[s.name]=e[1],p(n.name,e[0]),x()}),e.filterElements[n.name]={setValue:function(t){b.datepicker("update",t),x()}},e.filterElements[s.name]={setValue:function(t){b.datepicker("update",t),x()}}})}prepareSingleDatePicker(){var t=this.settings,e=this,a=(this.$instance,this.$instanceWrapper);void 0!==t.singleDatepicker[0]&&$.each(t.singleDatepicker,function(i,r){var n=" ",s="",o="";r.options||(r.options=[]),r.options.push({value:"show-date-picker",text:AppLanugage.custom}),$.each(r.options,function(t,e){var a="";e.isSelected&&(a="active",s=e.value,o=e.text),n+='<div class="list-group-item '+a+'" data-value="'+e.value+'">'+e.text+"</div>"}),o||(n='<div class="list-group-item active" data-value="">'+(o="- "+r.defaultText+" -")+"</div>"+n),r.name&&(t.filterParams[r.name]=s);var l=function(a){t.filterParams[r.name]=a,e.reloadInstance()},d=function(t){return t+"<span class='ml10 dropdown-toggle'></span>"},c='<div class="datepicker-custom-list list-group mb0">'+n+"</div>",p="";r.class&&(p=r.class);var f='<div class="filter-item-box"><button name="'+r.name+'" class="btn '+p+' datepicker-custom-selector">'+d(o)+"</button></div>";e.appendFilterDom(f);var u=a.find("[name='"+r.name+"']"),m=void 0!==r.options[1];u.datepicker({format:t._inputDateFormat,autoclose:!0,todayHighlight:!0,language:"custom",weekStart:AppHelper.settings.firstDayOfWeek,orientation:"bottom"}).on("show",function(){m&&($(".datepicker-days, .datepicker-months, .datepicker-years, .datepicker-decades, .table-condensed").hide(),$(".datepicker-custom-list").show(),$(".datepicker-custom-list").length||($(".datepicker").append(c),$(".datepicker .list-group-item").click(function(){$(".datepicker .list-group-item").removeClass("active"),$(this).addClass("active");var e=$(this).attr("data-value");"show-date-picker"===e?($(".datepicker-custom-list, .datepicker-months, .datepicker-years, .datepicker-decades, .table-condensed").hide(),$(".datepicker-days, .table-condensed").show()):($(".datepicker").hide(),moment(e,t._inputDateFormat).isValid()&&(e=moment(e,t._inputDateFormat).format(t._inputDateFormat)),u.html(d($(this).html())),l(e))})))}).on("changeDate",function(e){u.html(d(moment(e.date,t._inputDateFormat).format("Do MMMM YYYY"))),l(moment(e.date,t._inputDateFormat).format(t._inputDateFormat))}),e.filterElements[r.name]={setValue:function(e){u.datepicker("update",e);var a="";$.each(r.options,function(t,i){e===i.value&&(a=i.text)}),e&&a?u.html(d(a)):e?u.html(d(moment(e,t._inputDateFormat).format("Do MMMM YYYY"))):r.defaultText&&u.html(d(r.defaultText)),$(".datepicker .list-group-item").removeClass("active"),$(".datepicker .list-group-item").each(function(){e===$(this).attr("data-value")&&$(this).addClass("active")})}}})}prepareRadioFilter(){var t=this.settings,e=this,a=(this.$instance,this.$instanceWrapper);if(void 0!==t.radioButtons[0]){var i="",r="";$.each(t.radioButtons,function(e,a){var n="",s="";r=a.name,a.isChecked&&(n=" checked",s=" active",t.filterParams[a.name]=a.value),i+='<label class="btn btn-default mb0 '+s+'">',i+='<input type="radio" name="'+a.name+'" value="'+a.value+'" autocomplete="off" '+n+">"+a.text,i+="</label>"});var n='<div class="filter-item-box"><div class="btn-group filter" data-act="radio" data-toggle="buttons">'+i+"</div></div>";e.appendFilterDom(n);var s=a.find("[data-act='radio'] input[type=radio]");s.click(function(){setTimeout(function(){s.each(function(){$(this).closest("label").removeClass("active"),$(this).is(":checked")&&(t.filterParams[$(this).attr("name")]=$(this).val(),$(this).closest("label").addClass("active"))}),e.reloadInstance()})}),e.filterElements[r]={setValue:function(t){s.each(function(){$(this).closest("label").removeClass("active"),$(this).val()==t?($(this).closest("label").addClass("active"),$(this).prop("checked",!0)):$(this).prop("checked",!1)})}}}}prepareMultiselectFilter(){var t=this.settings,e=this,a=(this.$instance,this.$instanceWrapper);void 0!==t.multiSelect[0]&&$.each(t.multiSelect,function(i,r){var n="",s=[],o=r.saveSelection,l=getCookie(r.name);l&&(l=l.split("-")),$.each(r.options,function(t,e){var a="";(o&&l&&l.indexOf(e.value)>-1||o&&!l&&e.isChecked||!o&&e.isChecked)&&(a=" active",s.push(e.value)),n+='<li class="list-group-item clickable '+a+'" data-name="'+r.name+'" data-value="'+e.value+'">',n+=e.text,n+="</li>"}),n="<div class='dropdown-menu'><ul class='list-group' data-act='multiselect'>"+n+"</ul></div>";var d="";r.class&&(d=r.class),t.filterParams[r.name]=s;var c='<div class="filter-item-box"><span class="dropdown inline-block filter-multi-select"><button class="'+d+' btn btn-default dropdown-toggle caret " type="button" data-bs-toggle="dropdown" aria-expanded="true">'+r.text+" </button>"+n+"</span></div>";e.appendFilterDom(c);var p=a.find("[data-name='"+r.name+"']");p.click(function(){var a=$(this);return a.toggleClass("active"),setTimeout(function(){var i=[],n="";a.parent().find("li").each(function(){n=$(this).attr("data-name"),$(this).hasClass("active")&&i.push($(this).attr("data-value"))}),o&&(l=i.join("-"),setCookie(r.name,l)),t.filterParams[n]=i,e.reloadInstance()}),!1}),e.filterElements[r.name]={setValue:function(t){t||(t=[]),p.each(function(){t.includes($(this).attr("data-value"))?$(this).addClass("active"):$(this).removeClass("active")})}}})}prepareCheckboxFilter(){var t=this.settings,e=this,a=(this.$instance,this.$instanceWrapper);if(void 0!==t.checkBoxes[0]){var i="",r=[],n="";$.each(t.checkBoxes,function(t,e){var a="",s="";n=e.name,e.isChecked&&(a=" checked",s=" active",r.push(e.value)),i+='<label class="btn btn-default mb0 '+s+'">',i+='<input type="checkbox" name="'+e.name+'" value="'+e.value+'" autocomplete="off" '+a+">"+e.text,i+="</label>"}),t.filterParams[n]=r;var s='<div class="filter-item-box"><div class="btn-group filter" data-act="checkbox" data-toggle="buttons">'+i+"</div></div>";e.appendFilterDom(s),a.find("[data-act='checkbox']").click(function(){var a=$(this);setTimeout(function(){var i=[],r="";a.parent().find("input:checkbox").each(function(){r=$(this).attr("name"),$(this).is(":checked")?(i.push($(this).val()),$(this).closest("label").addClass("active")):$(this).closest("label").removeClass("active")}),t.filterParams[r]=i,e.reloadInstance()})}),e.filterElements[n]={setValue:function(t){t||(t=[]),a.find("input:checkbox").each(function(){n===$(this).attr("name")&&(t.includes($(this).val())?$(this).closest("label").addClass("active"):$(this).closest("label").removeClass("active"))})}}}}prepareDependentFilter(t,e,a,i,r){var n=this.$instanceWrapper;$.each(a,function(a,s){if(s.dependency&&s.dependency.length&&-1!==s.dependency.indexOf(t)){var o=n.find("select[name="+s.name+"]"),l=s.name;if((s.selfDependency&&!e||e)&&s.dataSource)$.ajax({url:s.dataSource,data:i,type:"POST",dataType:"json",success:function(t){if(t&&t.length){var e="",a="";$.each(t,function(t,i){t||(a=i.id),e+="<option value='"+i.id+"'>"+i.text+"</option>"}),o.html(e),r&&r[l]?o.select2("val",r[l]):o.select2("val",a)}}});else{var d=o.find("option:first");o.html("<option value='"+d.val()+"'>"+d.html()+"</option>"),o.select2("val",d.val())}if(i&&r&&r[l])i[l]=r[l];else if(i){var d=o.find("option:first");i[s.name]=d.val()}}})}}var buildFilterDom=function(t,e,a){new BuildFilters(t,e,a).init()};"undefined"!=typeof TableTools&&(TableTools.DEFAULTS.sSwfPath=AppHelper.assetsDirectory+"js/datatable/TableTools/swf/copy_csv_xls_pdf.swf");var $appFilterXhrRequest="new";function encodeAjaxPostData(t){return t=replaceAll("=","~",t),t=replaceAll("&","^",t)}function replaceAll(t,e,a){return a.replace(RegExp(t,"g"),e)}!function(t){t.fn.appTable=function(e){var a=1*AppHelper.settings.displayLength;(isNaN(a)||!a)&&(a=10);var i=!1;"1"===AppHelper.settings.disableResponsiveDataTable?i=!1:"1"!==AppHelper.settings.disableResponsiveDataTableForMobile&&window.outerWidth<800&&(i=!0);var r={serverSide:!1,smartFilterIdentity:null,ignoreSavedFilter:!1,source:"",xlsColumns:[],pdfColumns:[],printColumns:[],columns:[],order:[[0,"asc"]],hideTools:!1,displayLength:a,dateRangeType:"",checkBoxes:[],multiSelect:[],radioButtons:[],filterDropdown:[],singleDatepicker:[],rangeDatepicker:[],stateSave:!0,isMobile:window.outerWidth<800,responsive:i,stateDuration:5184e3,columnShowHideOption:!0,tableRefreshButton:!1,filterParams:{datatable:!0},onDeleteSuccess:function(){},onUndoSuccess:function(){},onInitComplete:function(){},customLanguage:{noRecordFoundText:AppLanugage.noRecordFound,searchPlaceholder:AppLanugage.search,printButtonText:AppLanugage.print,excelButtonText:AppLanugage.excel,printButtonToolTip:AppLanugage.printButtonTooltip,today:AppLanugage.today,yesterday:AppLanugage.yesterday,tomorrow:AppLanugage.tomorrow},footerCallback:function(t,e,a,i,r){},rowCallback:function(t,e,a,i){},summation:"",onRelaodCallback:function(){}},n=t(this);if(!n.is("table"))return console.log("appTable: Element must have to be a table",this),!1;n.on("length.dt page.dt order.dt search.dt",function(){setTimeout(function(){feather.replace()},1)});var s=t.extend({},r,e);if(s.reload){var o=t(this).dataTable(),l=window.InstanceCollection[t(this).attr("id")];l||(l=s);var d=o.get(0).id;return l.serverSide?window.appTables[d]._fnReDraw():o.fnReloadAjax(l.filterParams),t(this).data("onRelaodCallback")&&t(this).data("onRelaodCallback")(o,l.filterParams),!1}if(s.newData){var o=t(this).dataTable();if(s.dataId){var c=t(this).find("[data-post-id='"+s.dataId+"']");c.length||(c=t(this).find("[data-index-id='"+s.dataId+"']")),c.length?(o.api().row(o.api().row(c.closest("tr")).index()).data(s.newData),o.fnUpdateRow(null,o.api().page())):o.fnUpdateRow(s.newData)}else s.rowDeleted?o.fnUpdateRow(s.newData,o.api().page(),!0):o.fnUpdateRow(s.newData);return!1}s.responsive&&n.addClass("nowrap");var p=function(e,a,i){var r="",n="";return"all"===a&&(n='data-section="all_pages"'),r+="<tr "+n+">",t.each(e.columns,function(n,s){var o="class = 'tf-blank' ",l=" ";e.summation[0]&&e.summation[0].column-1===n&&(l=i,o="class = 'tf-lable' "),t.each(e.summation,function(t,e){e.column===n&&(o="class = 'tf-result text-right' ",o+="data-"+a+'-page="'+e.column+'"')}),r+="<th "+o+">",r+=l,r+="</th>"}),r+="</tr>"};if(s.summation&&s.summation.length&&!s.isMobile){var f="<tfoot>";f+=p(s,"current",AppLanugage.total),f+=p(s,"all",AppLanugage.totalOfAllPages),f+="</tfoot>",n.html(f)}s._visible_columns=[],t.each(s.columns,function(t,e){!1!==e.visible&&s._visible_columns.push(t);var a=!1;s.serverSide?e.order_by?a=!0:!e.order_by&&e.iDataSort&&s.columns[e.iDataSort].order_by&&(a=!0):!1!==e.sortable&&(a=!0),s.columns[t].orderable=a}),s._exportable=s.xlsColumns.length+s.pdfColumns.length+s.printColumns.length,s._firstDayOfWeek=AppHelper.settings.firstDayOfWeek||0,s._inputDateFormat="YYYY-MM-DD",s=prepareDefaultFilters(s);var u=[[10,25,50,100,-1],[10,25,50,100,AppLanugage.all]];s.serverSide&&(u=[[10,25,50,100],[10,25,50,100]]);var m={ajax:{url:s.source,type:"POST",data:function(e){var a=e.order&&e.order[0]?e.order[0].column:"",i=e.order&&e.order[0]?e.order[0].dir:"",r=e.search?e.search.value:"";i&&(i=i.toUpperCase());var n=0;return s.serverSide&&(n=1),t.extend({order_by:s.columns[a]?s.columns[a].order_by:"",order_dir:i,search_by:r,skip:e.start,limit:e.length,draw:e.draw,server_side:n},s.filterParams)}},sServerMethod:"POST",columns:s.columns,bProcessing:!0,serverSide:s.serverSide,iDisplayLength:s.displayLength,aLengthMenu:u,bAutoWidth:!1,bSortClasses:!1,order:s.order,stateSave:s.stateSave,responsive:s.responsive,fnStateLoadParams:function(t,e){e&&e.search&&(e.search.search="")},stateDuration:s.stateDuration,fnInitComplete:function(){s.onInitComplete(this)},language:{lengthMenu:"_MENU_",zeroRecords:s.customLanguage.noRecordFoundText,info:"_START_-_END_ / _TOTAL_",sInfo:"_START_-_END_ / _TOTAL_",infoFiltered:"(_MAX_)",search:"",searchPlaceholder:s.customLanguage.searchPlaceholder,sInfoEmpty:"0-0 / 0",sInfoFiltered:"(_MAX_)",sInfoPostFix:"",sInfoThousands:",",sProcessing:"<div class='table-loader'><span class='loading'></span></div>",oPaginate:{sPrevious:"<i data-feather='chevrons-left' class='icon-16'></i>",sNext:"<i data-feather='chevrons-right' class='icon-16'></i>"}},sDom:"",footerCallback:function(e,a,i,r,n){var l=this;if(s.summation){var d=l.api().page.info(),c="",p="",f="";if(!d.recordsTotal)return t(l).find("tfoot").hide(),!1;t(l).find("tfoot").show(),t.each(s.summation,function(e,a){var i=calculateDatatableTotal(l,a.column,function(t){return!t||t.startsWith("<b>")?0:"currency"===a.dataType?(a.dynamicSymbol&&(a.currencySymbol=t.replace(/[0-9.,-]/g,"")),unformatCurrency(t,a.conversionRate)):"time"===a.dataType?moment.duration(t).asSeconds():"number"===a.dataType?unformatCurrency(t):t},!0);"currency"===a.dataType?i=toCurrency(i,a.currencySymbol):"time"===a.dataType?i=secondsToTimeFormat(i):"number"===a.dataType&&(i=toCurrency(i,"none"));var r=o.column(a.column).header();if(r&&(p+="<div class='box'><div class='box-content'>"+t(r).html()+"</div><div class='box-content text-right'>"+i+"</div></div>"),t(l).find("[data-current-page="+a.column+"]").html(i),d.pages>1){t(l).find("[data-section='all_pages']").show();var n=calculateDatatableTotal(l,a.column,function(t){return!t||t.startsWith("<b>")?0:"currency"===a.dataType?unformatCurrency(t,a.conversionRate):"time"===a.dataType?moment.duration(t).asSeconds():"number"===a.dataType?unformatCurrency(t):t});"currency"===a.dataType?n=toCurrency(n,a.currencySymbol):"time"===a.dataType?n=secondsToTimeFormat(n):"number"===a.dataType&&(n=toCurrency(n,"none"));var s=o.column(a.column).header();s&&(f+="<div class='box'><div class='box-content'>"+t(s).html()+"</div><div class='box-content text-right'>"+n+"</div></div>"),t(l).find("[data-all-page="+a.column+"]").html(n)}else t(l).find("[data-section='all_pages']").hide()}),s.isMobile&&(p&&(c+="<div class='box'><div class='box-content strong'>"+AppLanugage.total+"</div></div>"+p),f&&(c+="<div class='box'><div class='box-content strong'>"+AppLanugage.totalOfAllPages+"</div></div>"+f),t(".summation-section").html(c))}s.footerCallback(e,a,i,r,n,l)},fnRowCallback:function(t,e,a,i){s.rowCallback(t,e,a,i)}};AppHelper.userId&&(m.stateSaveParams=function(t,e){-1===t.sInstance.indexOf("-user-ref-")&&(t.sInstance+="-user-ref-"+AppHelper.userId)},m.stateLoadCallback=function(t){-1===t.sInstance.indexOf("-user-ref-")&&(t.sInstance+="-user-ref-"+AppHelper.userId);try{return JSON.parse((-1===t.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+t.sInstance+"_"+location.pathname))}catch(e){}});var h="";if(s._exportable){var v=[];s.xlsColumns.length&&v.push({extend:"excelHtml5",footer:!0,text:s.customLanguage.excelButtonText,exportOptions:{columns:s.xlsColumns},customize:function(e){if(n.find("[data-section='all_pages']")&&"none"!==n.find("[data-section='all_pages']").css("display")){var a=e.xl.worksheets["sheet1.xml"],i=parseInt(t(a.childNodes[0].childNodes[1]).find("row:last-child").attr("r"))+1,r=0,s='<row r="'+i+'">';n.find("[data-section='all_pages'] th").each(function(){t(this).text()&&(s+='<c t="inlineStr" r="'+"abcdefghijklmnopqrstuvwxyz"[r].toUpperCase()+i+'" s="2">',s+="<is>",s+="<t>"+t(this).text()+"</t>",s+="</is>",s+="</c>"),r+=1}),s+="</row>",a.childNodes[0].childNodes[1].innerHTML=a.childNodes[0].childNodes[1].innerHTML+s}}}),s.pdfColumns.length&&v.push({extend:"pdfHtml5",exportOptions:{columns:":visible:not(.option)"}}),s.printColumns.length&&v.push({extend:"print",autoPrint:!1,text:s.customLanguage.printButtonText,footer:!0,exportOptions:{columns:s.printColumns},customize:function(e){if(t(e.document.body).closest("html").addClass("dt-print-view"),n.find("[data-section='all_pages']")&&"none"!==n.find("[data-section='all_pages']").css("display")){var a=n.find("[data-section='all_pages']").clone();t(e.document.body).find("tfoot").append(a)}},customizeData:function(t,e,a){}}),m.buttons=v,h="<'datatable-export filter-item-box'B >"}var g="";s.smartFilterIdentity&&(g="<'filter-form'>"),s.hideTools||(m.sDom="<'filter-section-container' <'filter-section-flex-row' <'filter-section-left'> <'filter-section-right' "+h+" <'filter-item-box' f> > > "+g+" r>t<'datatable-tools clearfix row'<'col-md-3 pl15'<'summation-section'> li><'col-md-9 pr15'p>>"),m.drawCallback=function(){s.serverSide&&n.closest(".dataTables_wrapper").find("input[type=search]").val(s.filterParams&&s.filterParams.search_by?s.filterParams.search_by:"")};var b=n.dataTable(m),y=n.closest(".dataTables_wrapper"),d=n.get(0)?n.get(0).id:"id_not_found";if(window.appTables||(window.appTables=[]),window.appTables[d]=b,y.find("select").select2({minimumResultsForSearch:-1}),s.columnShowHideOption){var d=n.attr("id");o=n.DataTable(),y.find(".filter-section-left").append('<div class="filter-item-box"><button class="btn btn-default column-show-hide-popover" data-container="body" data-bs-toggle="popover" data-placement="bottom"><i data-feather="columns" class="icon-16"></i></button></div>'),y.find(".column-show-hide-popover").popover({html:!0,sanitize:!1,content:function(){var e="";return t.each(s.columns,function(t,a){if(!1!==a.visible){var i=o.column(t),r="",n="";i.visible()||(r="active",n="<i data-feather='eye-off' class='icon-16 mr10'></i>"),e+="<li class='"+r+" list-group-item clickable toggle-table-column' data-column='"+t+"'>"+n+a.title+"</li>"}}),"<ul class='list-group' data-table='"+d+"'>"+e+"</ul>"}}),y.find(".column-show-hide-popover").on("shown.bs.popover",function(){feather.replace(),t(".toggle-table-column").on("click",function(){var e=t(this).closest(".list-group").attr("data-table"),a=t("#"+e).DataTable().column(t(this).attr("data-column"));a&&(a.visible(!a.visible()),t(this).toggleClass("active"))})})}(s.tableRefreshButton&&(y.find(".filter-section-left").append('<div class="filter-item-box float-start "><button class="btn btn-default at-table-refresh-button ml15"><i data-feather="refresh-cw" class="icon-16"></i></button></div>'),y.find(".at-table-refresh-button").on("click",function(){n.appTable({reload:!0,filterParams:s.filterParams})})),t("body").hasClass("destroy-popover")||(t("body").addClass("destroy-popover"),t(".destroy-popover").on("click",function(e){if("popover"!==t(e.target).closest("button").attr("data-bs-toggle")&&!t(e.target).closest(".popover").length&&!t(e.target).hasClass("editable")){var a=t(".popover.in").attr("id");t("[aria-describedby="+a+"]").trigger("click")}})),n.data("onRelaodCallback",s.onRelaodCallback),s.serverSide)?(y.find("input[type=search]").unbind().bind("input",delayAction(function(e){s.filterParams.search_by=t(this).val(),n.appTable({reload:!0,filterParams:s.filterParams})},1e3)),t("body").on("click","#"+n.get(0).id+" .badge.clickable",function(){return s.filterParams.search_by=t(this).text(),n.appTable({reload:!0,filterParams:s.filterParams}),!1}),t("body").on("click","#"+n.get(0).id+" .filter-sub-task-button",function(){return s.filterParams.search_by=t(this).attr("main-task-id"),n.appTable({reload:!0,filterParams:s.filterParams}),!1}),t("body").on("click","#"+n.get(0).id+" .remove-filter-button",function(){return s.filterParams.search_by="",n.appTable({reload:!0,filterParams:s.filterParams}),!1})):t("body").on("click","#"+n.get(0).id+" .badge.clickable",function(){var e=t(this).text();return t(this).closest(".dataTable").DataTable().search(e).draw(),t(this).closest(".dataTables_wrapper").find("input[type=search]").val(e).focus().select(),!1}),buildFilterDom(s,y,n);var x=function(e){t('<a class="undo-delete" href="javascript:;"><strong>'+AppLanugage.undo+"</strong></a>").insertAfter(t(e.alertSelector).find(".app-alert-message")),t(e.alertSelector).find(".undo-delete").bind("click",function(){t(e.alertSelector).remove(),appLoader.show(),t.ajax({url:e.url,type:"POST",dataType:"json",data:{id:e.id,undo:!0},success:function(t){appLoader.hide(),t.success&&(n.appTable({newData:t.data,rowDeleted:!0}),s.onUndoSuccess(t))}})})},k=function(t,e){var a=e.closest("tr"),i=n.DataTable(),r=e.attr("data-undo"),o=e.attr("data-action-url"),l=e.attr("data-id");b.fnDeleteRow(i.row(a).index(),function(){i.page(i.page()).draw("page")},!1);var d=appAlert.warning(t.message,{duration:2e4});s.onDeleteSuccess(t),"0"!==r&&x({alertSelector:d,url:o,id:l})},D=function(t){deleteConfirmationHandler(t,k)},Y=function(t){deleteHandler(t,k)},w=function(e){appLoader.show();var a=t(e.currentTarget);e.data&&e.data.target&&(a=e.data.target);var i=a.attr("data-action-url");t.ajax({url:i,dataType:"json",success:function(e){e.success?(t(".dataTable:visible").appTable({newData:e.data,dataId:e.id}),appAlert.success(e.message,{duration:1e4})):appAlert.error(e.message),appLoader.hide()}})};window.InstanceCollection=window.InstanceCollection||{},window.InstanceCollection[t(this).attr("id")]=s,t("body").find(n).on("click","a[data-action=delete]",Y),t("body").find(n).on("click","a[data-action=delete-confirmation]",D),t("body").find(n).on("click","[data-action=update]",w),t.fn.dataTableExt.oApi.getSettings=function(t){return t},t.fn.dataTableExt.oApi.fnReloadAjax=function(e,a){this.fnClearTable(this),this.oApi._fnProcessingDisplay(e,!0);var i=this;"new"===$appFilterXhrRequest&&($appFilterXhrRequest=t.ajax({url:e.ajax.url,type:"POST",dataType:"json",data:a,success:function(t){$appFilterXhrRequest="new";for(var a=0;a<t.data.length;a++)i.oApi._fnAddData(e,t.data[a]);e.aiDisplay=e.aiDisplayMaster.slice(),i.fnDraw(i),i.oApi._fnProcessingDisplay(e,!1)}}))},t.fn.dataTableExt.oApi.fnUpdateRow=function(t,e,a,i){e&&this.oApi._fnAddData(t,e),i&&this.fnDraw(this),a?this.oApi._fnPageChange(t,a,!0):this.fnDraw(this)}}}(jQuery),deleteHandler=function(t,e){appLoader.show();var a=$(t.currentTarget);t.data&&t.data.target&&(a=t.data.target);var i=a.attr("data-action-url"),r=a.attr("data-id"),n=a.attr("data-reload-on-success");$.ajax({url:i,type:"POST",dataType:"json",data:{id:r},success:function(t){t.success?(e&&e(t,a),n&&location.reload()):appAlert.error(t.message),appLoader.hide()}})},deleteConfirmationHandler=function(t,e){var a=$("#confirmDeleteButton"),i=$(t.currentTarget);i.each(function(){$.each(this.attributes,function(){this.specified&&this.name.match("^data-")&&a.attr(this.name,this.value)})}),i.attr("data-undo","0"),a.unbind("click"),a.on("click",{target:i},function(t){deleteHandler(t,e)}),$("#confirmationModal").modal("show")},(define=function(t,e){window.appAlert=e(window.jQuery)})(["jquery"],function(t){return function(){var e={info:function t(e,r){return this._settings=a(r),this._settings.alertType="info",i(e),"#"+this._settings.alertId},success:function t(e,r){return this._settings=a(r),this._settings.alertType="success",i(e),"#"+this._settings.alertId},warning:function t(e,r){return this._settings=a(r),this._settings.alertType="warning",i(e),"#"+this._settings.alertId},error:function t(e,r){return this._settings=a(r),this._settings.alertType="error",i(e),"#"+this._settings.alertId},options:{container:"body",duration:0,showProgressBar:!0,clearAll:!0,animate:!0}};return e;function a(a){if(!a)var a={};return a.alertId="app-alert-"+function t(){for(var e="",a="abcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)e+=a.charAt(Math.floor(Math.random()*a.length));return e}(),this._settings=t.extend({},e.options,a)}function i(e){(function e(){this._settings.clearAll&&t("[role='alert']").remove()})(),t(this._settings.container).length?(this._settings.animate&&setTimeout(function(){t(".app-alert").animate({opacity:1,right:"40px"},500,function(){t(".app-alert").animate({right:"15px"},300)})},20),t(this._settings.container).prepend(function t(e){var a="info";return"error"===this._settings.alertType?a="danger":"success"===this._settings.alertType?a="success":"warning"===this._settings.alertType&&(a="warning"),this._settings.animate&&(a+=" animate"),'<div id="'+this._settings.alertId+'" class="app-alert alert alert-'+a+' alert-dismissible " role="alert"><button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert" aria-label="Close"></button><div class="app-alert-message">'+e+'</div><div class="progress"><div class="progress-bar bg-'+a+' hide" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div></div></div>'}(e)),function e(){if(this._settings.duration&&this._settings.showProgressBar){var a="#"+this._settings.alertId,i=t(a).find(".progress-bar");i.removeClass("hide").width(0);var r="width "+this._settings.duration+"ms ease";i.css({WebkitTransition:r,MozTransition:r,MsTransition:r,OTransition:r,transition:r}),setTimeout(function(){t(a).length>0&&t(a).remove()},this._settings.duration)}}()):console.log("appAlert: container must be an html selector!")}}()}),(define=function(t,e){window.appLoader=e(window.jQuery)})(["jquery"],function(t){var e;return{show:function e(a){var i=t("#app-loader");if(this._settings=function e(a){if(!a)var a={};return this._settings=t.extend({},appLoader.options,a)}(a),!i.length){var r=t(this._settings.container);r.length?r.append('<div id="app-loader" class="app-loader" style="z-index:'+this._settings.zIndex+";"+this._settings.css+'"><div class="loading"></div></div>'):console.log("appLoader: container must be an html selector!")}},hide:function e(){var a=t("#app-loader");a.length&&a.remove()},options:{container:"body",zIndex:"auto",css:""}}}),(define=function(t,e){window.appContentModal=e(window.jQuery)})(["jquery"],function(t){return function(){var e={init:function r(n){var s,o,l,d;this._settings=function e(a){return a||(a={}),this._settings=t.extend({},appLoader.options,a)}(n),s=this._settings,o="<div class='app-modal-sidebar hidden-xs'>                                        <div class='clearfix'>                                            <div class='app-modal-files-button float-start'>                                                <span class='app-modal-previous-button clickable'><i data-feather='chevron-left' class='icon-18'></i></span>                                                <span class='app-modal-next-button clickable'><i data-feather='chevron-right' class='icon-18'></i></span>                                            </div>                                            <div class='app-modal-close float-end'><span>&times;</span></div>                                        </div>                                        <div class='app-moadl-sidebar-scrollbar'>                                            <div class='app-modal-sidebar-area'>                                            </div>                                        </div>                                    </div>",l="<span class='expand hidden-xs'><i data-feather='maximize-2' class='icon-16'></i></span>",(!1===s.sidebar||isMobile())&&(o="",l="<div class='app-modal-close app-modal-fixed-close-button'><span>&times;</span></div>"),d="<div class='app-modal loading'>                                <span class='compress'><i data-feather='minimize-2' class='icon-16'></i></span>                                <div class='app-modal-body'>                                    <div class='app-modal-content'>"+l+"<div class='hide app-modal-close'><span>&times;</span></div>                                        <div class='app-modal-content-area d-inline-block'>                                        </div>                        </div>"+o+"</div>                            </div>",i(),t("body").prepend(d),setTimeout(function(){var e=t(window).height()-60;t(".app-modal-content-area").prop("scrollHeight")>e&&t(".app-modal-content-area").css({"max-height":e+"px","overflow-y":"scroll",width:"100%"}),t.fn.mCustomScrollbar&&t(".app-moadl-sidebar-scrollbar").mCustomScrollbar({setHeight:e,theme:"minimal-dark",autoExpandScrollbar:!0})},200),t(".expand").click(function(){t(".app-modal").addClass("full-content")}),t(".compress").click(function(){t(".app-modal").removeClass("full-content")}),t(".app-modal-close").click(function(){i()}),t(".app-modal-previous-button").click(function(){showPreviousFile()}),t(".app-modal-next-button").click(function(){showNextFile()}),t(document).bind("keyup",a),appLoader.show({container:".app-modal",css:"top:35%; right:48%;"}),appModalXhr=t.ajax({url:s.url||"",data:{},cache:!1,type:"POST",success:function(e){var a=t(e);t(".app-modal-content-area").html(a.find(".app-modal-content").html()),t(".app-modal-sidebar-area").html(a.find(".app-modal-sidebar").html()),a.remove(),t(".app-modal").removeClass("loading"),appLoader.hide()},statusCode:{404:function(){e.destroy(),appAlert.error("404: Page not found.")}},error:function(){e.destroy(),appAlert.error("500: Internal Server Error.")}})},destroy:i,options:{url:"",css:"",sidebar:!0}};return e;function a(t){27===t.keyCode&&i()}function i(){t(".app-modal").remove(),t(document).unbind("keyup",a),"undefined"!=typeof appModalXhr&&appModalXhr.abort()}}()}),function(t){t.fn.appDateRange=function(e){var a=t.extend({},{dateRangeType:"yearly",filterParams:{},onChange:function(t){},onInit:function(t){}},e);a._inputDateFormat="YYYY-MM-DD",this.each(function(){var e=t(this);e.append('<div class="ml15 btn-group"><button data-act="prev" class="btn btn-default date-range-selector"><i data-feather="chevron-left" class="icon-16"></i></button><button data-act="datepicker" class="btn btn-default"></button><button data-act="next"  class="btn btn-default date-range-selector"><i data-feather="chevron-right" class="icon-16"></i></button></div>');var i=e.find("[data-act='datepicker']"),r=e.find(".date-range-selector");if("yearly"===a.dateRangeType){var n=function(t){t.html(moment(a.filterParams.start_date).format("YYYY"))};n(i),i.datepicker({format:"YYYY-MM",viewMode:"years",minViewMode:"years",autoclose:!0,language:"custom",orientation:"bottom"}).on("changeDate",function(t){var e=moment(t.date).format(a._inputDateFormat),r=moment(e).format("YYYY");a.filterParams.start_date=r+"-01-01",a.filterParams.end_date=r+"-12-31",a.filterParams.year=r,n(i),a.onChange(a.filterParams)});var s=moment().format("YYYY");a.filterParams.start_date=s+"-01-01",a.filterParams.end_date=s+"-12-31",a.filterParams.year=s,a.onInit(a.filterParams),r.click(function(){var e=t(this).attr("data-act"),r=moment(a.filterParams.start_date),s=moment(a.filterParams.end_date);"next"===e?(r=r.add(1,"years").format(a._inputDateFormat),s=s.add(1,"years").format(a._inputDateFormat)):"prev"===e&&(r=r.subtract(1,"years").format(a._inputDateFormat),s=s.subtract(1,"years").format(a._inputDateFormat)),a.filterParams.start_date=r,a.filterParams.end_date=s,a.filterParams.year=moment(r).format("YYYY"),n(i),a.onChange(a.filterParams)})}else if("monthly"===a.dateRangeType){var o=function(t){t.html(moment(a.filterParams.start_date).format("MMMM YYYY"))};o(i),i.datepicker({format:"YYYY-MM",viewMode:"months",minViewMode:"months",autoclose:!0,language:"custom"}).on("changeDate",function(t){var e=moment(t.date).format(a._inputDateFormat),r=moment(e).daysInMonth(),n=moment(e).format("YYYY-MM");a.filterParams.start_date=n+"-01",a.filterParams.end_date=n+"-"+r,o(i),a.onChange(a.filterParams)});var s=moment().format("YYYY"),l=moment().format("YYYY-MM"),d=moment().daysInMonth();a.filterParams.start_date=l+"-01",a.filterParams.end_date=l+"-"+d,a.filterParams.year=s,a.onInit(a.filterParams),r.click(function(){var e=t(this).attr("data-act"),r=moment(a.filterParams.start_date),n=moment(a.filterParams.end_date);if("next"===e){var s=r.add(1,"months"),l=s.daysInMonth(),d=s.format("YYYY-MM");r=d+"-01",n=d+"-"+l}else if("prev"===e){var c=r.subtract(1,"months"),l=c.daysInMonth(),d=c.format("YYYY-MM");r=d+"-01",n=d+"-"+l}a.filterParams.start_date=r,a.filterParams.end_date=n,a.filterParams.year=moment(r).format("YYYY-MM"),o(i),a.onChange(a.filterParams)})}})}}(jQuery);var loadFilterView=function(t){t.source&&t.targetSelector&&$.ajax({url:t.source,data:t.filterParams,cache:!1,type:"POST",success:function(e){$(t.targetSelector).html(e),appLoader.hide()},statusCode:{404:function(){appLoader.hide(),appAlert.error("404: Page not found.",{container:".modal-body",animate:!1})}},error:function(){appLoader.hide(),appAlert.error("500: Internal Server Error.",{container:".modal-body",animate:!1})}})};!function(t){t.fn.appFilters=function(e){appLoader.show();var a={source:"",targetSelector:"",reloadSelector:"",dateRangeType:"",checkBoxes:[],multiSelect:[],radioButtons:[],filterDropdown:[],singleDatepicker:[],rangeDatepicker:[],stateSave:!0,ignoreSavedFilter:!1,isMobile:window.outerWidth<800,filterParams:{customFilter:!0},search:{show:!1},customLanguage:{searchPlaceholder:AppLanugage.search,today:AppLanugage.today,yesterday:AppLanugage.yesterday,tomorrow:AppLanugage.tomorrow},beforeRelaodCallback:function(){},afterRelaodCallback:function(){},onInitComplete:function(){}},i=t(this),r=i,n=t.extend({},a,e);if(n.reload){var s=t(this),o=window.InstanceCollection[s.attr("id")];return s.data("beforeRelaodCallback")&&s.data("beforeRelaodCallback")(s,o.filterParams),loadFilterView(o),s.data("afterRelaodCallback")&&s.data("afterRelaodCallback")(s,o.filterParams),!1}var l="";n.smartFilterIdentity&&(l="<div class='filter-form'></div>"),r.append("<div class='filter-section-container'>\n                    <div class='filter-section-flex-row'>\n                            <div class='filter-section-left'></div><div class='filter-section-right'></div>\n                    </div>"+l+"</div>"),n._firstDayOfWeek=AppHelper.settings.firstDayOfWeek||0,n._inputDateFormat="YYYY-MM-DD",buildFilterDom(n=prepareDefaultFilters(n),r,i),window.InstanceCollection=window.InstanceCollection||{},window.InstanceCollection[i.attr("id")]=n,n.onInitComplete&&n.onInitComplete(i,n.filterParams),loadFilterView(n),i.data("beforeRelaodCallback",n.beforeRelaodCallback),i.data("afterRelaodCallback",n.afterRelaodCallback)}}(jQuery),replaceAllString=function(t,e,a){return t.split(e).join(a)},toCurrency=function(t,e){t="0"==AppHelper.settings.noOfDecimals?Math.round(parseFloat(t))+".00":parseFloat(t).toFixed(2),e||(e=AppHelper.settings.currencySymbol);var a=t.replace(/(\d)(?=(\d{3})+\.)/g,"$1,");return(" "===AppHelper.settings.thousandSeparator&&(a=a.replace(","," ")),","===AppHelper.settings.decimalSeparator&&(a=replaceAllString(a,".","_"),a=replaceAllString(a,",","."),a=replaceAllString(a,"_",",")),"none"===e&&(e=""),"0"==AppHelper.settings.noOfDecimals&&(a=a.slice(0,-3)),"right"===AppHelper.settings.currencyPosition)?a+""+e:"0"==a.indexOf("-")?"-"+e+(a=a.replace("-","")):e+""+a},calculateDatatableTotal=function(t,e,a,i){var r=t.api(),n={};return i&&(n={page:"current"}),r.column(e,n).data().reduce(function(t,e,i,r){return a?t+a(e):t+e},0)},unformatCurrency=function(t,e){var a=t=t.toString(),i=!1;if(t){if(t=t.replace(/[^0-9.,-]/g,""),e){var r=a.replace(t,"");e[r]&&(t=unformatDecimalSeparator(t),t=(t=1/e[r]*1*t).toString(),i=!0)}(0==t.indexOf(".")||0==t.indexOf(","))&&(t=t.slice(1)),i||(t=unformatDecimalSeparator(t)),t*=1}return t||0},unformatDecimalSeparator=function(t){return","===AppHelper.settings.decimalSeparator?(t=replaceAllString(t,".",""),t=replaceAllString(t,",",".")):t=replaceAllString(t,",",""),t},secondsToTimeFormat=function(t){var e=parseInt(t,10),a=Math.floor(e/3600),i=Math.floor((e-3600*a)/60),r=e-3600*a-60*i;return a<10&&(a="0"+a),i<10&&(i="0"+i),r<10&&(r="0"+r),a+":"+i+":"+r},clearAppTableState=function(t){t&&setTimeout(function(){t.api().state.clear()},200)},showHideAppTableColumn=function(t,e,a){t.fnSetColumnVis(e,!!a)},function(t){t.fn.appMention=function(e){var a=t.extend({},{at:"@",dataType:"json",source:"",data:{}},e),i=this;t.ajax({url:a.source,data:a.data,dataType:a.dataType,method:"POST",success:function(e){e.success&&t(i).atwho({at:a.at,data:e.data,insertTpl:"${content}"})}})}}(jQuery),function(t){t.fn.appMultiSelect=function(e){var a=t.extend({},{text:"",options:[],onChange:function(t){},onInit:function(t){}},e);this.each(function(){var e=t(this),i="",r=[];t.each(a.options,function(t,e){var n="";e.isChecked&&(n=" active",r.push(e.id)),i+='<li class="list-group-item clickable '+n+'" data-name="'+a.name+'" data-value="'+e.id+'">',i+=e.text,i+="</li>"}),i="<div class='dropdown-menu'><ul class='list-group' data-act='multiselect'>"+i+"</ul></div>";var n='<div class=""><span class="dropdown inline-block filter-multi-select"><button class="btn btn-default dropdown-toggle caret " type="button" data-bs-toggle="dropdown" aria-expanded="true">'+a.text+" </button>"+i+"</span></div>";e.append(n),a.onInit(r),e.find("[data-name='"+a.name+"']").click(function(){var e=t(this);return e.toggleClass("active"),setTimeout(function(){var i=[];e.parent().find("li").each(function(){t(this).hasClass("active")&&i.push(t(this).attr("data-value"))}),a.onChange(i)}),!1})})}}(jQuery),function(t){t.fn.appModifier=function(e){var a=t.extend({},{actionUrl:"",value:"",actionType:"select2",showbuttons:!1,datepicker:{},select2Option:{},timepickerOptions:{},dataType:"json",onSuccess:function(){}},e),i=getRandomAlphabet(5),r="";a.showbuttons&&(r="<div class='custom-popover-button-area mt10 clearfix row'>\n                            <div id='custom-popover-submit-btn-"+i+"' class='col-md-6 pr5'><button class='btn btn-primary btn-sm w100p'><i data-feather='check' class='icon-16'></i></button></div>\n                            <div class='col-md-6 pl5 custom-popover-close-btn'><button class='btn btn-default btn-sm w100p'><i data-feather='x' class='icon-16'></i></button></div>\n                        </div>");var n="";if("select2"===a.actionType)n="<input id='"+i+"' value='"+a.value+"' type='text' class='form-control popover-tempId' /> "+r;else if("date"===a.actionType){var s=getJsDateFormat(),o=a.value.split("-"),l=o[0],d=o[1],c=o[2];n="<div style='height: 240px;' id='"+i+"'  data-date='"+s.replace("yyyy",l).replace("mm",d).replace("dd",c)+"' data-date-format='"+s+"' class='popover-tempId'></div>"}else"time"===a.actionType&&(n="<input class='form-control' type='text' id='"+i+"'  value='"+a.value+"' /><div id='popover-timepicker-container-"+i+"' ></div>"+r);var p=t(this),f=p.offset(),u=f.top,m=f.left,h="<div class='app-popover' style='top: "+(u+p.outerHeight()+10)+"px; left: "+m+"px'>\n                                <span class='app-popover-arrow' ></span>\n                                <div class='app-popover-body'>\n                                    <div class='loader-container inline-loader hide'></div>\n                                    "+n+" \n                                </div>\n                            </div>";t(".app-popover").remove(),t("body").append(h),feather.replace();var v=t("#"+i),g=t("#popover-timepicker-container-"+i);if("select2"===a.actionType)a.showbuttons?t("#"+i).select2(a.select2Option):t("#"+i).select2(a.select2Option).change(function(e){x(p,t(this).val(),a,e.added.text)});else if("date"===a.actionType)a.datepicker.onChangeDate=function(t){x(p,t,a)},setDatePicker("#"+i,a.datepicker);else if("time"===a.actionType){var b="24_hours"!=AppHelper.settings.timeFormat,y=t.extend({},{minuteStep:AppHelper.settings.timepickerMinutesInterval,defaultTime:"",appendWidgetTo:"#popover-timepicker-container-"+i,showMeridian:b,isInline:!0},a.timepickerOptions);v.timepicker(y),v.timepicker().on("show.timepicker",function(t){feather.replace()}),setTimeout(function(){v.focus(),setTimeout(function(){t(".bootstrap-timepicker-widget").removeClass("dropdown-menu")})})}function x(e,a,i,r){var n=v.closest(".app-popover-body").height(),s=v.closest(".app-popover-body").width();v.closest(".app-popover-body").find(".loader-container").removeClass("hide").css({height:n,width:s}),v.closest(".app-popover-body").find(".custom-popover-button-area").addClass("hide"),v.addClass("hide"),g.addClass("hide"),t.ajax({url:i.actionUrl,type:"POST",dataType:i.dataType,data:{value:a},success:function(n){t(".app-popover").remove(),setTimeout(function(){v.closest(".app-popover-body").find(".loader-container").addClass("hide"),v.closest(".app-popover-body").find(".custom-popover-button-area").removeClass("hide"),v.removeClass("hide"),g.removeClass("hide")},200),n.success?(i.onSuccess(n),r&&e.text(r),e.attr("data-value",a),t(".app-popover").remove()):appAlert.error(n.message)}})}t("body").find(".app-popover").each(function(){var e=t(window).width()-(t(this).offset().left+t(this).outerWidth());if(e<0){t(this).css({left:"unset",right:"10px"});var e=t(window).width()-(p.offset().left+p.outerWidth()/2*1);t(this).find(".app-popover-arrow").css({left:"unset",right:e})}}),t("div#custom-popover-submit-btn-"+i).click(function(){x(p,v.val(),a)}),t(".custom-popover-close-btn").click(function(){t(".app-popover").remove()})}}(jQuery),function(t){t.fn.appConfirmation=function(e){var a=t.extend({},{title:"",btnConfirmLabel:"",btnCancelLabel:"",onConfirm:function(){}},e),i=t(this).offset(),r=i.top,n=i.left,s="<div class='app-popover' style='bottom: "+(t(window).height()-(r-10))+"px; left: "+n+"px'>\n                                <span class='app-popover-arrow bottom-arrow' ></span>\n                                <div class='loader-container inline-loader hide'></div>\n                                <div class='app-popover-content-container'>\n                                    <div class='confirmation-title'>"+a.title+"</div>\n                                    <div class='app-popover-body pt0'>\n                                        <div class='custom-popover-button-area mt15 clearfix row'>\n                                            <div class='col-md-6 pr5'><button class='btn btn-danger btn-sm w100p confirmation-confirm-button'><i data-feather='check' class='icon-16'></i> "+a.btnConfirmLabel+"</button></div>\n                                            <div class='col-md-6 pl5'><button class='btn btn-default btn-sm w100p confirmation-cancel-button'><i data-feather='x' class='icon-16'></i> "+a.btnCancelLabel+"</button></div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>";t(".app-popover").remove(),t("body").append(s),feather.replace(),t(".confirmation-confirm-button").click(function(){t(".app-popover").remove(),a.onConfirm()}),t(".confirmation-cancel-button").click(function(){t(".app-popover").remove()})}}(jQuery);